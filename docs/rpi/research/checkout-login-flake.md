# Checkout/Login Flake Research (Workspace Evidence)

Date: 2026-02-26  
Scope: Research only. No code/config changes.

| facts | assumptions | unknowns | risks | evidence gaps | candidate file allow-list |
|---|---|---|---|---|---|
| **Which test(s) fail (full test title):** No failed test result is present in available trace artifacts. Step stack references `tests/checkout/checkout-complete-order.spec.ts`; artifact folder slug `checkout-checkout-complete-ea306-ow-with-Sauce-Labs-Backpack-chromium` suggests a checkout-complete scenario, but exact full Playwright test title is not directly present in inspected trace lines. | Trace artifacts correspond to a valid run for the current AUT and not to an unrelated archived run. | Exact full test title string and final pass/fail summary entry from source report JSON are not directly available in the inspected files. | Mislabeling a flaky case if title/outcome is inferred only from folder slug and step stack. | Need machine-readable Playwright result payload (or original spec file) that includes explicit test title and status. | tests/checkout/login.spec.ts; pages/login.page.ts |
| **Which browser/environment:** Trace `context-options` shows `playwrightVersion: 1.58.2`, `platform: win32`, SDK language `javascript`; browser project evidence appears as `project#chromium`; launch params show `headless: true`. | Current CI/local execution settings in config are representative of the run that produced this trace. | Whether this exact run was CI or local invocation and which OS image/version was used beyond `win32`. | Environment variance (local vs CI vs browser matrix) may hide intermittent failures. | Missing execution provenance metadata (commit SHA, CI run id, machine image). | tests/checkout/login.spec.ts; pages/login.page.ts |
| **What error messages appear:** No timeout/detached/navigation assertion failure messages were found in inspected trace events. Observed console/network error: `Failed to load resource: 401 (Unauthorized)` from `https://events.backtrace.io/api/unique-events/submit?...`; also one network record with status `-1` for summed-events submit. | Backtrace telemetry errors are non-blocking for core checkout behavior. | Whether telemetry errors correlate with flaky behavior in other runs. | External telemetry noise can pollute failure triage signal and obscure root causes. | Need repeated-run evidence to determine whether 401/-1 events are incidental or correlated with instability. | tests/checkout/login.spec.ts; pages/login.page.ts |
| **Current locator strategy (roles vs CSS vs XPath):** Predominantly semantic role selectors in trace (`getByRole` mapped to `internal:role=...`) for username/password/login and checkout controls. Also mixed CSS/data-test locators: `.inventory_item ...`, `[data-test="shopping-cart-link"]`, `[data-test="title"]`, `.shopping_cart_badge`. No XPath usage observed in inspected trace artifacts. | Selector policy in unseen login spec follows the same semantic-first pattern. | Whether social-entry controls in login coverage use role-based selectors or brittle structural selectors. | Mixed locator strategy without explicit selector hierarchy can increase brittleness under DOM/text changes. | Missing source files prevent verifying selector conventions in repository code. | tests/checkout/login.spec.ts; pages/login.page.ts |
| **Current assertion strategy (web-first expects vs manual reads):** Web-first expectations dominate trace (`expect().toHaveURL`, `toHaveText`, `toBeVisible`) with timeout `5000ms`; assertions are present after critical actions. No manual DOM-read assertion style observed in inspected trace. | Assertion discipline observed in checkout trace extends to login and social-entry scenarios. | Whether hidden tests include click-only interactions lacking outcome assertions. | Inconsistent assertion discipline across unseen tests may permit false positives or flaky passes. | Cannot inspect `tests/checkout/login.spec.ts` in current workspace snapshot because file is absent. | tests/checkout/login.spec.ts; pages/login.page.ts |
| **Navigation/waiting patterns:** Observed `goto("https://www.saucedemo.com/", waitUntil: "load")` and click auto-wait logs (`waiting for scheduled navigations to finish`). No `waitForTimeout`, no explicit `waitForURL`, and no explicit `networkidle` usage found in inspected trace events. | Team relies on auto-wait + web-first assertions as primary synchronization strategy. | Whether other suites (not present in workspace) use hard waits or explicit network-idle dependencies. | Hidden hard waits or fragile synchronization outside visible artifacts can still drive flakes. | Need full repository test corpus scan at source level to confirm wait-policy compliance. | tests/checkout/login.spec.ts; pages/login.page.ts |
| **Workspace availability fact:** `tests/checkout` and `pages/` are empty in the current workspace snapshot, while traces/report artifacts exist. | Missing source files are due to partial checkout/state mismatch, not tool-read failure. | Whether files were removed, excluded, or exist only in another branch/workspace. | Governance decisions can be under-scoped when source code and artifacts are out of sync. | Need authoritative source snapshot containing current login spec and page object files. | tests/checkout/login.spec.ts; pages/login.page.ts |

